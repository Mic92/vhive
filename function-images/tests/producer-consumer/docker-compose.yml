version: "3.7"

services:
    consumer:
        build:
            context: .
            target: consumer

    producer:
        build:
            context: .
            target: producer
        ports: 
            - "3031:3031"
        command: go run ./producer/producer.go --addr consumer
        depends_on:
            - consumer